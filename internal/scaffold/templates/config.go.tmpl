package main

import (
	"context"

	"github.com/fredrikaverpil/pocket/pk"
)

// Config is the Pocket configuration for this project.
// Edit this file to define your tasks and composition.
var Config = &pk.Config{
	Auto: pk.Serial(
		// Add your tasks here. Example:
		// pk.Parallel(Lint, Format),
		// pk.WithOptions(
		//     Test,
		//     pk.WithIncludePath("services"),
		//     pk.WithExcludePath("vendor"),
		// ),
		Hello,
	),

	// Plan configuration: shims, directories, and CI settings.
	// Use ./pok -g to run git diff check after execution.
	Plan: &pk.PlanConfig{
		Shims: &pk.ShimConfig{
			Posix:      true, // pok (POSIX shell script)
			Windows:    true, // pok.cmd (Windows batch file)
			PowerShell: true, // pok.ps1 (PowerShell script)
		},
	},
}

// Hello is an example task. Replace with your own tasks.
var Hello = &pk.Task{
	Name:  "hello",
	Usage: "print a greeting message",
	Do: func(ctx context.Context) error {
		pk.Println(ctx, "Hello from Pocket!")
		return nil
	},
}
